(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3028:e=>{e.exports={characterCard:"card_characterCard__pWxkn"}},7785:(e,t,a)=>{"use strict";a.d(t,{default:()=>C});var s=a(5155),r=a(2115),n=a(4029);let i={exhaustedSlot:"relative w-[0.75in] h-[0.75in] aspect-square border-2 border-[#999] rounded bg-white flex items-center justify-center text-[34px]"};function l(e){let{attackEffects:t,attackModifiers:a,attackSkill:r,description:n,edit:l=!1,exhaust:c,name:o,onEdit:d=null,onDelete:m=null,primary:u,subType:g,trigger:p,type:x}=e;return(0,s.jsxs)("div",{className:"".concat("action"===x||"reaction"===x?"h-[0.75in]":""," flex-shrink-0 flex flex-row items-center gap-2 relative group ").concat(l?"cursor-pointer hover:bg-blue-50 hover:border-blue-300 border border-transparent rounded p-1":""),onClick:()=>{l&&d&&d()},children:[l&&m&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),m&&m()},className:"absolute top-0 right-0 z-10 w-4 h-4 bg-red-500 hover:bg-red-600 text-white text-[8px] rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete facet",children:"\uD83D\uDDD1️"}),("action"===x||"reaction"===x)&&(0,s.jsx)("div",{id:"exhaustedSlot",className:i.exhaustedSlot,children:(0,s.jsxs)("div",{className:i.coreUsageSquares,children:["\uD83D\uDCA4",(0,s.jsx)("span",{className:"absolute top-0 right-0 top-[-3px] text-[16px]",children:c?"♻️":""}),(0,s.jsx)("span",{className:"absolute left-0 bottom-[-3] text-[16px]",children:c?"♻️":""})]})}),"attack"===g&&(0,s.jsxs)("div",{id:"content",className:"h-[0.75in] w-fit flex flex-wrap items-start gap-0",children:[(0,s.jsxs)("div",{id:"facetName",className:"font-bold w-fit whitespace-nowrap mb-[1px] mr-[4px]",children:["\uD83C\uDFAC ",o]}),(0,s.jsxs)("div",{className:"w-fit whitespace-nowrap",children:["⚔️:",u?r:Math.max(0,r-2)]}),(null==a?void 0:a.type)==="singleTarget"&&(0,s.jsxs)("div",{className:"w-fit whitespace-nowrap mb-[1px] pl-[2px]",children:["① | R: ",a.r,'"']}),(null==a?void 0:a.type)==="area"&&(0,s.jsxs)("div",{className:"w-fit whitespace-nowrap mb-[1px] pl-[2px]",children:["⭕ | R: ",a.r,'" | A: ',a.a,'"']}),(null==a?void 0:a.type)==="breakthrough"&&(0,s.jsxs)("div",{className:"w-fit whitespace-nowrap mb-[1px] pl-[2px]",children:["\uD83D\uDCCF | L: ",a.l,'"']}),(null==a?void 0:a.type)==="ricochet"&&(0,s.jsxs)("div",{className:"w-fit whitespace-nowrap mb-[1px] pl-[2px]",children:["\uD83D\uDD17 | InitR: ",a.initR,'" | T: ',a.t," | Btwn: ",a.btwn,'"']}),null==t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col mb-[0px] w-full leading-[10px]",children:[e.trigger,":",e.description]},"".concat(e.type,"-").concat(t)))]}),"reaction"===g&&(0,s.jsxs)("div",{id:"content",className:"h-[0.75in] w-fit flex flex-wrap items-start gap-0",children:[(0,s.jsxs)("div",{id:"facetName",className:"font-bold w-fit whitespace-nowrap mb-[1px] mr-[4px]",children:["↩️ ",o]}),(0,s.jsxs)("div",{className:"text-[8px] text-gray-600 w-full mb-[1px]",children:[(0,s.jsx)("strong",{children:"Trigger:"})," ",p]}),(0,s.jsx)("div",{className:"text-[8px] text-gray-600 w-full leading-[10px]",children:n})]}),("instant"===x||"passive"===x||"reaction"===x)&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{id:"facetName",className:"font-bold w-fit whitespace-nowrap mb-[1px] mr-[4px]",children:["instant"===x&&"⚡️ ","passive"===x&&"∞ ","reaction"===x&&"↩️ ",o]}),(0,s.jsxs)("div",{children:[" ",n]}),"reaction"===x&&(0,s.jsxs)("div",{className:"text-[8px] text-gray-600 mt-1",children:[(0,s.jsx)("strong",{children:"Trigger:"})," ",p]})]})]})}a(3028);let c={characterCard:"w-[4in] max-h-[6in] box-border border-2 border-[#222] rounded-lg p-[0.15in] bg-[#faf9f6] font-['Roboto_Condensed',Arial,Helvetica,sans-serif] text-[10px] text-black flex flex-col",characterCardRow:"flex items-stretch w-full grid grid-cols-[1fr_auto] mb-[0.05in]",coreInfo:"pr-[0.05in] relative flex flex-col justify-end w-full",nameRow:"text-[14px] truncate overflow-hidden whitespace-nowrap absolute top-[-8px] left-[-3px] w-full z-10 p-0 px-0",baseStats:"flex items-end h-full text-[16px] pb-1",coreUsage:"flex gap-[0.05in]",coreUsageSquares:"relative w-[0.75in] aspect-square border-2 border-[#222] rounded bg-white flex items-center justify-center text-[34px]"};function o(e){let{attackSkill:t,defense:a,edit:r=!1,facets:n,influence:i,mm:o,name:d,onFacetEdit:m=null,onFacetDelete:u=null,size:g,strides:p,wounds:x}=e;return(0,s.jsxs)("section",{id:"characterCard",className:c.characterCard,children:[(0,s.jsxs)("div",{id:"topRow",className:c.characterCardRow,children:[(0,s.jsxs)("div",{id:"coreInfo",className:c.coreInfo,children:[(0,s.jsx)("div",{id:"name",className:c.nameRow,children:d||"Character Name"}),(0,s.jsxs)("div",{id:"baseStats",className:c.baseStats,children:[(0,s.jsx)("span",{className:"inline-block flex-1",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{children:"\uD83D\uDCD0"}),(0,s.jsxs)("div",{children:[g,(0,s.jsxs)("span",{className:"text-[8px]",children:["(",o,"mm)"]})]})]})}),(0,s.jsx)("span",{className:"inline-block flex-1",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{children:"\uD83C\uDF10"}),(0,s.jsxs)("div",{children:[i,'"']})]})}),(0,s.jsx)("span",{className:"inline-block flex-1",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{children:"\uD83D\uDEE1️"}),(0,s.jsx)("div",{children:a})]})})]})]}),(0,s.jsxs)("div",{id:"coreUsage",className:c.coreUsage,children:[(0,s.jsxs)("div",{className:c.coreUsageSquares,children:["\uD83D\uDC5F",(0,s.jsx)("span",{className:"absolute top-0 left-0 top-[-3px] text-[16px]",children:"\uD83D\uDCA4"}),(0,s.jsx)("span",{className:"absolute top-0 right-0 top-[-3px] text-[16px]",children:p}),(0,s.jsx)("span",{className:"absolute left-0 bottom-[-3] text-[16px]",children:p})]}),(0,s.jsxs)("div",{className:c.coreUsageSquares,children:["❤️",(0,s.jsx)("span",{className:"absolute right-0 top-[-3px] text-[16px]",children:x}),(0,s.jsx)("span",{className:"absolute left-0 bottom-[-3] text-[16px]",children:x})]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap items-start gap-2 w-full min-h-[0.75in]",style:{alignContent:"flex-start"},children:n.map((e,a)=>(0,s.jsx)(l,{attackSkill:t,edit:r,onEdit:m?()=>m(a,e):null,onDelete:u?()=>u(a,e):null,...e},a))})]})}let d=[{value:1,min:25,max:39,strides:3,wounds:1,influence:'0"',attackSkill:0,defense:2,sizeCost:0},{value:2,min:40,max:59,strides:2,wounds:1,influence:'1"',attackSkill:0,defense:2,sizeCost:1},{value:3,min:60,max:89,strides:2,wounds:1,influence:'3"',attackSkill:0,defense:2,sizeCost:2},{value:4,min:90,max:129,strides:1,wounds:2,influence:'4"',attackSkill:0,defense:2,sizeCost:4},{value:5,min:130,max:170,strides:1,wounds:2,influence:'5"',attackSkill:0,defense:2,sizeCost:5}],m={wounds:{icon:"❤️",name:"Wounds",baseValue:"wounds",maxUpgrades:5,costType:"progressive",costs:[1,2,3,4,5],description:"Each additional Wound beyond the model's Base Wounds costs progressively more."},defense:{icon:"\uD83D\uDEE1️",name:"Defense",baseValue:"defense",maxUpgrades:3,costType:"progressive",costs:[4,6,8],description:"Each additional point of Defense beyond the base 2 costs progressively more."},attackSkill:{icon:"⚔️",name:"Attack Skill",baseValue:"attackSkill",maxUpgrades:6,costType:"progressive",costs:[3,5,7,9,11,13],description:"Each additional point of Attack Skill beyond the base 0 costs progressively more."},strides:{icon:"\uD83D\uDC5F",name:"Strides",baseValue:"strides",maxUpgrades:3,costType:"size-based",costs:{1:2,2:3,3:4,4:5,5:5},description:"Each additional Stride beyond the model's Base Strides has a fixed cost based on the model's Size Value."}},u={singleTarget:{icon:"①",name:"Single Target",description:"Attacks one model within range.",baseCosts:{primary:10,secondary:5},rangeUpgrades:[{range:0,cost:0,label:'0" (Base Contact)'},{range:1,cost:1,label:'1"'},{range:2,cost:2,label:'2"'},{range:3,cost:3,label:'3"'},{range:4,cost:5,label:'4"'},{range:5,cost:7,label:'5"'},{range:6,cost:9,label:'6"'},{range:7,cost:11,label:'7"'},{range:8,cost:13,label:'8"'},{range:9,cost:14,label:'9"'},{range:10,cost:17,label:'10"'},{range:11,cost:20,label:'11"'},{range:12,cost:23,label:'12"'}]},area:{icon:"⭕",name:"Area",description:"Affects all models whose bases are touched by or partially within a circular template centered at the target point.",baseCosts:{primary:17,secondary:10},diameterUpgrades:[{diameter:0,cost:0,label:'0" (Center Point/Self)',restriction:"Only legal if range is 0"},{diameter:1,cost:2,label:'1" Diameter'},{diameter:2,cost:5,label:'2" Diameter'},{diameter:3,cost:10,label:'3" Diameter'},{diameter:4,cost:20,label:'4" Diameter'}],rangeUpgrades:[{range:0,cost:1,label:'0"'},{range:1,cost:2,label:'1"'},{range:2,cost:4,label:'2"'},{range:3,cost:6,label:'3"'},{range:4,cost:9,label:'4"'},{range:5,cost:12,label:'5"'},{range:6,cost:16,label:'6"'},{range:7,cost:20,label:'7"'},{range:8,cost:25,label:'8"'}]},breakthrough:{icon:"\uD83D\uDCCF",name:"Breakthrough",description:"Affects models whose bases are touched by or intersect with a 1\" wide line drawn from the attacker's front arc.",baseCosts:{primary:16,secondary:9},lengthUpgrades:[{length:1,cost:1,label:'1"'},{length:2,cost:2,label:'2"'},{length:3,cost:4,label:'3"'},{length:4,cost:6,label:'4"'},{length:5,cost:9,label:'5"'},{length:6,cost:12,label:'6"'},{length:7,cost:16,label:'7"'},{length:8,cost:20,label:'8"'}]},ricochet:{icon:"\uD83D\uDD17",name:"Ricochet",description:"Chain attack that hits multiple targets in sequence, following line of sight rules between each target.",baseCosts:{primary:14,secondary:7},targetUpgrades:[{targets:1,cost:0,label:"1 Target (initial only)"},{targets:2,cost:2,label:"2 Targets"},{targets:3,cost:6,label:"3 Targets"}],rangeBetweenUpgrades:[{range:0,cost:0,label:'0" (base to base only)'},{range:1,cost:1,label:'1"'},{range:2,cost:2,label:'2"'},{range:3,cost:4,label:'3"'},{range:4,cost:6,label:'4"'}],initialRangeUpgrades:[{range:0,cost:1,label:'0" (base to base)'},{range:1,cost:2,label:'1"'},{range:2,cost:3,label:'2"'},{range:3,cost:5,label:'3"'},{range:4,cost:7,label:'4"'},{range:5,cost:9,label:'5"'},{range:6,cost:12,label:'6"'},{range:7,cost:15,label:'7"'},{range:8,cost:18,label:'8"'}]}},g={movement:{category:"Movement Effects",effects:{displaceAttacker:{name:"Displace Attacker",description:'Move attacker within 1" of target',costs:{"\uD83C\uDCCF✔️":6,"\uD83C\uDCCF✖️":7,"\uD83C\uDCCF✔️✖️":8,"♣️✔️":4,"♣️✖️":5,"♣️✔️✖️":6,"♣️♦️✔️":2,"♣️♦️✖️":3,"♣️♦️✔️✖️":4,"♣️♣️✔️":1,"♣️♣️✖️":2,"♣️♣️✔️✖️":3}},displaceDefender:{name:"Displace Defender",description:'Move target within 1" of original position',costs:{"\uD83C\uDCCF✔️":5,"\uD83C\uDCCF✖️":6,"\uD83C\uDCCF✔️✖️":7,"♣️✔️":3,"♣️✖️":4,"♣️✔️✖️":5,"♣️♦️✔️":1,"♣️♦️✖️":2,"♣️♦️✔️✖️":3,"♣️♣️✔️":0,"♣️♣️✖️":1,"♣️♣️✔️✖️":2}},knockback:{name:"Knockback",description:'Push target 1" directly away',costs:{"\uD83C\uDCCF✔️":4,"\uD83C\uDCCF✖️":5,"\uD83C\uDCCF✔️✖️":6,"♣️✔️":2,"♣️✖️":3,"♣️✔️✖️":4,"♣️♦️✔️":1,"♣️♦️✖️":2,"♣️♦️✔️✖️":3,"♣️♣️✔️":0,"♣️♣️✖️":1,"♣️♣️✔️✖️":2}},throw:{name:"Throw",description:"Throw target if 2 sizes smaller",costs:{"\uD83C\uDCCF✔️":8,"\uD83C\uDCCF✖️":9,"\uD83C\uDCCF✔️✖️":10,"♣️✔️":5,"♣️✖️":6,"♣️✔️✖️":7,"♣️♦️✔️":3,"♣️♦️✖️":4,"♣️♦️✔️✖️":5,"♣️♣️✔️":2,"♣️♣️✖️":3,"♣️♣️✔️✖️":4}},throwTerrain:{name:"Throw Terrain",description:"Throw terrain if 2 sizes smaller",costs:{"\uD83C\uDCCF✔️":6,"\uD83C\uDCCF✖️":7,"\uD83C\uDCCF✔️✖️":8,"♣️✔️":4,"♣️✖️":5,"♣️✔️✖️":6,"♣️♦️✔️":2,"♣️♦️✖️":3,"♣️♦️✔️✖️":4,"♣️♣️✔️":1,"♣️♣️✖️":2,"♣️♣️✔️✖️":3}}}},temporary:{category:"Temporary Effects",effects:{hinder:{name:"Hinder",description:"Add 1 Hinder Token to the Defender",costs:{"\uD83C\uDCCF✔️":5,"\uD83C\uDCCF✖️":6,"\uD83C\uDCCF✔️✖️":7,"♣️✔️":2,"♣️✖️":3,"♣️✔️✖️":4,"♣️♦️✔️":1,"♣️♦️✖️":2,"♣️♦️✔️✖️":3,"♣️♣️✔️":0,"♣️♣️✖️":1,"♣️♣️✔️✖️":2}},slow:{name:"Slow",description:"Add 1 Slow Token to the Defender",costs:{"\uD83C\uDCCF✔️":5,"\uD83C\uDCCF✖️":6,"\uD83C\uDCCF✔️✖️":7,"♣️✔️":2,"♣️✖️":3,"♣️✔️✖️":4,"♣️♦️✔️":1,"♣️♦️✖️":2,"♣️♦️✔️✖️":3,"♣️♣️✔️":0,"♣️♣️✖️":1,"♣️♣️✔️✖️":2}},weaken:{name:"Weaken",description:"Add 1 Weaken Token to the Defender",costs:{"\uD83C\uDCCF✔️":5,"\uD83C\uDCCF✖️":6,"\uD83C\uDCCF✔️✖️":7,"♣️✔️":2,"♣️✖️":3,"♣️✔️✖️":4,"♣️♦️✔️":1,"♣️♦️✖️":2,"♣️♦️✔️✖️":3,"♣️♣️✔️":0,"♣️♣️✖️":1,"♣️♣️✔️✖️":2}}}},other:{category:"Other Effects",effects:{damageOverTime:{name:"Damage Over Time",description:"Add 1 Damage Over Time Token to the Defender",costs:{"\uD83C\uDCCF✔️":5,"\uD83C\uDCCF✖️":6,"\uD83C\uDCCF✔️✖️":7,"♣️✔️":3,"♣️✖️":4,"♣️✔️✖️":5,"♣️♦️✔️":2,"♣️♦️✖️":3,"♣️♦️✔️✖️":4,"♣️♣️✔️":1,"♣️♣️✖️":2,"♣️♣️✔️✖️":3}},nullStrike:{name:"Null Strike",description:"No damage dealt",costs:{"\uD83C\uDCCF✔️":-6,"\uD83C\uDCCF✖️":-5,"\uD83C\uDCCF✔️✖️":-4},restriction:"Cannot be chosen unless at least one Always effect is present"},exhaust:{name:"Exhaust",description:"Add 1 Exhaust Token to 1 of the Defender's Actions",costs:{"\uD83C\uDCCF✔️":22,"\uD83C\uDCCF✖️":25,"\uD83C\uDCCF✔️✖️":28,"♣️✔️":11,"♣️✖️":14,"♣️✔️✖️":17,"♣️♦️✔️":8,"♣️♦️✖️":11,"♣️♦️✔️✖️":14}}}}},p={exhaustionOption:{name:"Exhaustion Option",description:"When purchasing any action, the player MAY choose to make it more taxing",effects:{exhaustTokens:2,costReduction:3,mustChooseAtPurchase:!0}},attackSkillCap:{name:"Attack Skill Cap for Area/Breakthrough/Ricochet",description:"Attack Skill is considered maximum 4 for Area, Breakthrough, and Ricochet attacks, even if actual Attack Skill is higher",affectedTemplates:["area","breakthrough","ricochet"],maxAttackSkill:4}},x={minimumRequirement:{description:"Each model MUST have at least 1 Attack Action",enforcement:"mandatory"},attackSkillCap:{description:"Attack Skill is considered maximum 4 for Area, Breakthrough, and Ricochet attacks, even if actual Attack Skill is higher",maxAttackSkill:4,affectedTemplates:["area","breakthrough","ricochet"]},primaryAttack:{description:"Uses the model's full Attack Skill for its attack value",attackSkillModifier:0,limit:1},secondaryAttack:{description:"Uses the model's Attack Skill - 2 (minimum 0) for its attack value",attackSkillModifier:-2,minimum:0},exhaustionOption:{description:"Action inflicts 2 Exhaust Tokens instead of 1, reduces cost by 2 points",exhaustTokens:2,costReduction:2,minimumCost:1}},h={displaceTarget:{name:"Displace Target (Reach, Size -2)",description:"Throw target 2 sizes smaller within reach",cost:12,category:"displacement",targeting:"reach",sizeRequirement:"-2"},displaceTerrain:{name:"Displace Terrain (Reach, Size -2)",description:"Throw terrain 2 sizes smaller within reach",cost:10,category:"displacement",targeting:"reach",sizeRequirement:"-2"},displaceSelfLOS:{name:'Displace Self (LOS, 6")',description:'Place this model anywhere within 6" and line of sight',cost:6,category:"displacement",targeting:"self",range:'6"',requiresLOS:!0},shiftSelf:{name:'Shift Self (1")',description:'Move this model 1"; does not count as movement',cost:4,category:"movement",targeting:"self",range:'1"'},removeTemporaryEffect:{name:'Remove Temporary Effect (4")',description:'Remove one temporary effect on a model within 4"',cost:8,category:"utility",targeting:"model",range:'4"'},compelMovement:{name:'Compel Movement (LOS, 4")',description:"Target can only move toward this model on its next activation",cost:8,category:"control",targeting:"model",range:'4"',requiresLOS:!0},displaceSelfNoLOS:{name:'Displace Self (No LOS, 4")',description:'Place this model anywhere within 4", ignoring line of sight',cost:8,category:"displacement",targeting:"self",range:'4"',requiresLOS:!1}},f={grantDefenseBonus:{name:'Grant Defense Bonus (Aura, 2")',description:'Friendly models within 2" gain +1 Defense',cost:10,category:"aura",range:'2"',effect:"+1 Defense to allies"},reduceWoundTaken1:{name:"Reduce Wound Taken (Min 1)",description:"Reduces all incoming damage by 1 (min 1)",cost:15,category:"defense",effect:"Damage reduction -1 (min 1)"},reduceWoundTaken2:{name:"Reduce Wound Taken (Min 2)",description:"Reduces all incoming damage by 2 (min 2)",cost:16,category:"defense",effect:"Damage reduction -2 (min 2)"},displacementImmunity:{name:"Displacement Immunity (Size ≤ Self)",description:"Immune to Push and Throw from models of equal/lesser Size",cost:12,category:"immunity",effect:"Immunity to displacement from equal/smaller models"},regenerateSelf:{name:"Regenerate Self (End of Activation)",description:"At end of activation, heal 1 Wound if no active DOT",cost:12,category:"healing",timing:"end of activation",condition:"no active DOT"},increaseDisplacementSize2:{name:"Increase Displacement Size (+2)",description:"+2 size vs push/throw",cost:10,category:"defense",effect:"+2 effective size vs displacement"},attackBonusVsLarge:{name:"Attack Bonus vs Large (Size 3+)",description:"+1 to Attack Skill when targeting models with Size 3+",cost:5,category:"offense",effect:"+1 Attack Skill vs Size 3+ targets"},ignoreClimbPenalty:{name:"Ignore Climb Penalty",description:"Ignores extra Stride cost for Climbing (R-5.2.4)",cost:6,category:"movement",effect:"No climbing movement penalty"},ignoreMovementPenalties:{name:"Ignore Movement Penalties",description:"Ignores all movement penalties except the Slow condition",cost:9,category:"movement",effect:"Ignore movement penalties (except Slow)"},defenseBonusVsRanged:{name:"Defense Bonus vs Ranged",description:"+2 defense vs ranged attacks",cost:6,category:"defense",effect:"+2 Defense vs ranged attacks"},attackPenaltyAura:{name:'Attack Penalty Aura (2"+Influence)',description:'-1 to attacks within 2"+influence',cost:5,category:"aura",range:'2"+influence',effect:"-1 to enemy attacks in range"},attackBonusIfStationary:{name:"Attack Bonus If Stationary",description:"+2 to attack if no move action this turn",cost:8,category:"offense",condition:"no movement this turn",effect:"+2 Attack Skill when stationary"},attackPenaltyVsDistant:{name:'Attack Penalty vs Distant (6"+)',description:'-2 to attacks from beyond 6"',cost:8,category:"defense",effect:'-2 to incoming attacks from 6"+ range'},increaseVsDisplacementSize2:{name:"Increase vs Displacement Size (+2)",description:"+2 size vs push/throw",cost:8,category:"defense",effect:"+2 effective size vs displacement"},alwaysPartialCover:{name:"Always Partial Cover",description:"Always benefits from Partial Cover (R-6.2.2)",cost:7,category:"defense",effect:"Permanent Partial Cover benefit"},increaseForDisplacementSize1:{name:"Increase For Displacement Size (+1)",description:"+1 size for push/throw",cost:6,category:"offense",effect:"+1 effective size when displacing others"},increaseCoverBonus:{name:"Increase Cover Bonus",description:"Increase cover +1",cost:6,category:"defense",effect:"+1 to all cover bonuses"},increaseVsDisplacementSize1:{name:"Increase vs Displacement Size (+1)",description:"+1 size vs push/throw",cost:4,category:"defense",effect:"+1 effective size vs displacement"},ignoreObscuredStealth:{name:"Ignore Obscured/Stealth",description:"Ignores Obscured terrain (R-6.2.2) and enemy Stealth Field",cost:9,category:"utility",effect:"Ignore Obscured terrain and Stealth"}},b={shared:{playerNaming:"Players are encouraged to assign their own thematic names for narrative purposes",namingConvention:"[Effect] [Target/Range/LOS] [Distance/Area] [Special Condition]",maxPurchases:3,maxPurchasesRule:"A model MAY purchase up to 3 of each ability type",costScaling:"Ability costs reflect their power level and game impact",narrativeUse:"Abilities should enhance the model's role in the narrative"},instantAbilities:{description:"Special abilities that can be activated during gameplay",activationTiming:"Instant abilities can be used during the model's activation",onePerTurn:"A model MAY only use one instant ability per turn",rules:["shared.playerNaming","shared.namingConvention","shared.maxPurchases","shared.costScaling"]},passiveAbilities:{description:"Special rules, passive benefits, or always-on effects that define a model's inherent capabilities or unique traits",alwaysActive:"Passive abilities are always in effect and do not require activation",stackingLimits:"Multiple passive abilities of the same type do not stack unless explicitly stated",rules:["shared.playerNaming","shared.maxPurchases","shared.narrativeUse"]}},y={negateDisplacement:{name:"Negate Displacement (Self)",description:"Cannot be pushed or thrown this attack",trigger:"When targeted by push or throw",cost:12,category:"defensive",targeting:"self",effect:"Immunity to displacement for one attack"},reduceDisplacement:{name:'Reduce Displacement (Self, 2")',description:'Reduce push/knockback distance by 2"',trigger:"When pushed or knocked back",cost:8,category:"defensive",targeting:"self",effect:'Reduce displacement distance by 2"'},displaceSelfReaction:{name:'Displace Self (Reaction, 1")',description:'Move 1" before attack resolves',trigger:"When targeted by an attack",cost:8,category:"evasive",targeting:"self",range:'1"',effect:'Move 1" before attack resolution'},increaseDefense:{name:"Increase Defense",description:"Draw 3 cards for defense and discard 1 of player's choice",trigger:"When targeted by an attack",cost:8,category:"defensive",targeting:"self",effect:"Draw 3 defense cards, discard 1"}},v={usageLimit:{description:"Reaction may be used once per trigger event",enforcement:"mandatory",limit:1},exhaustionOption:{description:"Reactions can use the exhaustion option like attack actions",reference:"GENERAL_ACTION_RULES.exhaustionOption",exhaustTokens:2,costReduction:3,minimumCost:1},triggerRequirement:{description:"Each reaction requires a specific trigger event to activate",enforcement:"mandatory"},uniqueReactionRequirement:{description:"Unless explicitly stated otherwise, a model CANNOT purchase the same exact reaction more than once",enforcement:"mandatory"}};function j(e){let{mm:t,size:a,setSize:n}=e,[i,l]=(0,r.useState)(null!=t?t:"");return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 flex flex-col gap-4 text-black",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Choose Size"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:["Each character MUST be assigned a Size Category before any other choices. Character Size is assigned by the model's base size in mm. Size determines several of a character's base stats.",(0,s.jsx)("label",{htmlFor:"baseSize",className:"font-medium",children:"Model Base Size:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{id:"baseSize",type:"number",min:"25",max:"170",className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50 w-24",value:null!=i?i:"",onChange:e=>l(e.target.value),placeholder:"mm"}),(0,s.jsx)("button",{className:"bg-sky-500 hover:bg-sky-700 text-white px-3 py-2 rounded transition cursor-pointer",onClick:()=>{let e=parseInt(i,10),t=d.find(t=>e>=t.min&&e<=t.max);t&&n(t,e)},children:"Select"})]}),(0,s.jsxs)("table",{className:"min-w-full mt-4 border border-gray-300 rounded text-[10px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-300 text-left",children:"Base Size"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-300 text-left",children:"Size Value"}),(0,s.jsx)("th",{className:"px-4 py-2 border-b border-gray-300 text-left",children:"Cost"})]})}),(0,s.jsx)("tbody",{children:d.map(e=>(0,s.jsxs)("tr",{className:"transition ".concat(a===e.value?"bg-sky-200":"hover:bg-sky-100"),children:[(0,s.jsx)("td",{className:"px-4 py-2 border-b border-gray-200",children:"".concat(e.min,"-").concat(e.max,"mm")}),(0,s.jsx)("td",{className:"px-4 py-2 border-b border-gray-200",children:e.value}),(0,s.jsx)("td",{className:"px-4 py-2 border-b border-gray-200",children:e.sizeCost})]},e.value))})]}),(0,s.jsxs)("table",{className:"min-w-full mt-8 border border-gray-300 rounded text-[10px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"px-2 py-1 border-b border-gray-300 text-left",children:"Size"}),(0,s.jsx)("th",{className:"px-2 py-1 border-b border-gray-300 text-left",children:"\uD83D\uDC5F Strides"}),(0,s.jsx)("th",{className:"px-2 py-1 border-b border-gray-300 text-left",children:"❤️ Wounds"}),(0,s.jsx)("th",{className:"px-2 py-1 border-b border-gray-300 text-left",children:"\uD83C\uDF10 Influence"}),(0,s.jsx)("th",{className:"px-2 py-1 border-b border-gray-300 text-left",children:"⚔️ Attack Skill"}),(0,s.jsx)("th",{className:"px-2 py-1 border-b border-gray-300 text-left",children:"\uD83D\uDEE1️ Defense"})]})}),(0,s.jsx)("tbody",{children:d.map(e=>(0,s.jsxs)("tr",{className:a===e.value?"bg-sky-200":"",children:[(0,s.jsx)("td",{className:"px-2 py-1 border-b border-gray-200",children:e.value}),(0,s.jsx)("td",{className:"px-2 py-1 border-b border-gray-200",children:e.strides}),(0,s.jsx)("td",{className:"px-2 py-1 border-b border-gray-200",children:e.wounds}),(0,s.jsx)("td",{className:"px-2 py-1 border-b border-gray-200",children:e.influence}),(0,s.jsx)("td",{className:"px-2 py-1 border-b border-gray-200",children:e.attackSkill}),(0,s.jsx)("td",{className:"px-2 py-1 border-b border-gray-200",children:e.defense})]},e.value))})]})]})]})}function k(e){let{attackSkill:t,defense:a,size:n,statsCost:i,strides:l,updateBaseStats:c,wounds:o}=e,[u,g]=(0,r.useState)(o),[p,x]=(0,r.useState)(a),[h,f]=(0,r.useState)(t),[b,y]=(0,r.useState)(l),v=d.find(e=>e.value===n),j=()=>{let e=0,t=(null==v?void 0:v.wounds)||0;if(u>t){let a=u-t,s=0;for(let e=0;e<a;e++)s+=m.wounds.costs[e];e+=s}let a=(null==v?void 0:v.defense)||0;if(p>a){let t=p-a,s=0;for(let e=0;e<t;e++)s+=m.defense.costs[e];e+=s}let s=(null==v?void 0:v.attackSkill)||0;if(h>s){let t=h-s,a=0;for(let e=0;e<t;e++)a+=m.attackSkill.costs[e];e+=a}let r=(null==v?void 0:v.strides)||0;return b>r&&(e+=(b-r)*(m.strides.costs[n]||m.strides.costs[1])),e},k=(e,t)=>{let a=m[e],s=[],r=(null==v?void 0:v[a.baseValue])||0;if("progressive"===a.costType){let e=0;for(let n=0;n<a.maxUpgrades;n++){let i=n+1,l=a.costs[n];e+=l;let c=r+i;s.push({level:i,finalValue:c,incrementalCost:l,cumulativeCost:e,isSelected:t===c,label:"".concat(a.name," ").concat(c," (+").concat(i,")")})}}else if("size-based"===a.costType){let e=a.costs[n]||a.costs[1];for(let n=0;n<a.maxUpgrades;n++){let i=n+1,l=e*i,c=r+i;s.push({level:i,finalValue:c,incrementalCost:e,cumulativeCost:l,isSelected:t===c,label:"+".concat(i," ").concat(a.name).concat(i>1?"s":""," (Total: ").concat(c,")")})}}return{rule:a,baseValue:r,costs:s}},N=k("wounds",u),w=k("defense",p),S=k("attackSkill",h),C=k("strides",b),A=(e,t)=>{switch(e){case"wounds":g(t);break;case"defense":x(t);break;case"attackSkill":f(t);break;case"strides":y(t)}},D=(e,t)=>{let{rule:a,baseValue:r,costs:n}=e,i=e.currentValue||r;return(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("h2",{className:"text-md font-semibold flex items-center gap-2",children:[(0,s.jsx)("span",{children:a.icon}),a.name," (Base: ",r,", Current: ",i,")"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,s.jsx)("div",{onClick:()=>A(t,r),className:"p-3 border rounded cursor-pointer hover:bg-blue-50 ".concat(i===r?"bg-green-50 border-green-300":"bg-gray-50 border-gray-300"),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{children:["Base ",a.name," ",r]}),(0,s.jsx)("span",{className:"font-semibold",children:"0 pts"})]})}),n.map(e=>(0,s.jsx)("div",{onClick:()=>A(t,e.finalValue),className:"p-3 border rounded cursor-pointer hover:bg-blue-50 ".concat(e.isSelected?"bg-green-50 border-green-300":"bg-gray-50 border-gray-300"),children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsxs)("span",{className:"font-semibold",children:[e.incrementalCost," pts (",e.cumulativeCost," total)"]})]})},e.level))]})]},a.name)},T=j(),R=u!==o||p!==a||h!==t||b!==l;return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 flex flex-col gap-6 text-black",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Edit Base Stats"}),(0,s.jsx)("div",{className:"flex flex-col gap-2 text-sm text-gray-600",children:"This section details how to improve a model's fundamental statistics: Wounds, Defense, Attack Skill, and Strides. Points spent here increase the corresponding stat."}),D({...N,currentValue:u},"wounds"),D({...w,currentValue:p},"defense"),D({...S,currentValue:h},"attackSkill"),D({...C,currentValue:b},"strides"),(0,s.jsxs)("div",{className:"flex flex-col gap-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold",children:[(0,s.jsx)("span",{children:"Total Cost:"}),(0,s.jsxs)("span",{children:[T," points"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{c({wounds:u,defense:p,attackSkill:h,strides:b,cost:j()})},disabled:!R,className:"flex-1 py-3 px-4 rounded font-semibold ".concat(R?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Update Stats"}),(0,s.jsx)("button",{onClick:()=>{g(o),x(a),f(t),y(l)},disabled:!R,className:"py-3 px-4 rounded font-semibold ".concat(R?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Reset"})]})]})]})}function N(e){var t,a,n,i,l,c,o,d,m,h;let{attackSkill:f,existingAttack:b=null,existingFacets:y=[],onAddAttack:v=null,onUpdateAttack:j=null}=e,k=!!b,N=y.some((e,t)=>"attack"===e.subType&&e.primary&&(!k||y.indexOf(b)!==t)),w=!N||k&&(null==b?void 0:b.primary),[S,C]=(0,r.useState)((null==b?void 0:b.name)||""),[A,D]=(0,r.useState)((null==b||null==(t=b.attackModifiers)?void 0:t.type)||""),[T,R]=(0,r.useState)(null!=(m=null==b?void 0:b.primary)?m:!N),[z,U]=(0,r.useState)(null!=(h=null==b?void 0:b.exhaust)&&h),[M,P]=(0,r.useState)((null==b||null==(a=b.attackModifiers)?void 0:a.r)||0),[E,O]=(0,r.useState)((null==b||null==(n=b.attackModifiers)?void 0:n.r)||0),[I,B]=(0,r.useState)((null==b||null==(i=b.attackModifiers)?void 0:i.a)||0),[F,q]=(0,r.useState)((null==b||null==(l=b.attackModifiers)?void 0:l.l)||1),[L,V]=(0,r.useState)((null==b||null==(c=b.attackModifiers)?void 0:c.t)||1),[W,_]=(0,r.useState)((null==b||null==(o=b.attackModifiers)?void 0:o.initR)||0),[Y,H]=(0,r.useState)((null==b||null==(d=b.attackModifiers)?void 0:d.btwn)||0),[G,Z]=(0,r.useState)((null==b?void 0:b.attackEffects)||[]),$=()=>{if(!A)return 0;let e=u[A],t=T?e.baseCosts.primary:e.baseCosts.secondary;switch(A){case"singleTarget":let a=e.rangeUpgrades.find(e=>e.range===M);t+=(null==a?void 0:a.cost)||0;break;case"area":let s=e.rangeUpgrades.find(e=>e.range===E),r=e.diameterUpgrades.find(e=>e.diameter===I);t+=((null==s?void 0:s.cost)||0)+((null==r?void 0:r.cost)||0);break;case"breakthrough":let n=e.lengthUpgrades.find(e=>e.length===F);t+=(null==n?void 0:n.cost)||0;break;case"ricochet":let i=e.targetUpgrades.find(e=>e.targets===L),l=e.initialRangeUpgrades.find(e=>e.range===W),c=e.rangeBetweenUpgrades.find(e=>e.range===Y);t+=((null==i?void 0:i.cost)||0)+((null==l?void 0:l.cost)||0)+((null==c?void 0:c.cost)||0)}return G.forEach(e=>{t+=e.cost||0}),z&&(t=Math.max(1,t-p.exhaustionOption.effects.costReduction)),t},K=(e,t,a,s)=>{let r=g[e].effects[t],[n,i]=a.split(/(?=✔️|✖️)/);Z([...G,{type:r.name,description:r.description,trigger:a,cost:s,categoryKey:e,effectKey:t,suit:n||"\uD83C\uDCCF",timing:i||"✔️"}])},J=e=>{Z(G.filter((t,a)=>a!==e))},Q=()=>{switch(A){case"singleTarget":return{type:"singleTarget",r:M};case"area":return{type:"area",r:E,a:I};case"breakthrough":return{type:"breakthrough",l:F};case"ricochet":return{type:"ricochet",t:L,initR:W,btwn:Y};default:return{}}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 flex flex-col gap-6 text-black",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:k?"Edit Attack Action":"Add Attack Action"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-gray-600",children:["Configure an Attack Action for your character. ",x.minimumRequirement.description,".",x.attackSkillCap.description,"."]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Action Name:"}),(0,s.jsx)("input",{type:"text",className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:S,onChange:e=>C(e.target.value),placeholder:"Enter attack name"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:T,onChange:e=>R(e.target.checked),disabled:!w&&!T}),"Primary Attack (Attack Skill: ",["area","breakthrough","ricochet"].includes(A)?Math.min(T?f:Math.max(0,f-2),p.attackSkillCap.maxAttackSkill):T?f:Math.max(0,f-2),")",!w&&!T&&(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"(Primary attack already exists)"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:T?x.primaryAttack.description:x.secondaryAttack.description})]}),(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:z,onChange:e=>U(e.target.checked)}),"Use Exhaustion Option (",x.exhaustionOption.description,")"]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Attack Template:"}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(u).map(e=>{let[t,a]=e;return(0,s.jsx)("div",{onClick:()=>D(t),className:"p-3 border rounded cursor-pointer hover:bg-blue-50 ".concat(A===t?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-300"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:a.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-semibold",children:a.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:a.description}),(0,s.jsxs)("div",{className:"text-sm font-medium",children:["Base Cost: ",T?a.baseCosts.primary:a.baseCosts.secondary," points"]})]})]})},t)})})]}),A&&(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Template Configuration"}),"singleTarget"===A&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Range:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:M,onChange:e=>P(parseInt(e.target.value)),children:u.singleTarget.rangeUpgrades.map(e=>(0,s.jsxs)("option",{value:e.range,children:[e.label," (+",e.cost," points)"]},e.range))})]}),"area"===A&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Range to Center:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:E,onChange:e=>O(parseInt(e.target.value)),children:u.area.rangeUpgrades.map(e=>(0,s.jsxs)("option",{value:e.range,children:[e.label," (+",e.cost," points)"]},e.range))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Area Diameter:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:I,onChange:e=>B(parseInt(e.target.value)),children:u.area.diameterUpgrades.map(e=>(0,s.jsxs)("option",{value:e.diameter,children:[e.label," (+",e.cost," points)"]},e.diameter))})]})]}),"breakthrough"===A&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Line Length:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:F,onChange:e=>q(parseInt(e.target.value)),children:u.breakthrough.lengthUpgrades.map(e=>(0,s.jsxs)("option",{value:e.length,children:[e.label," (+",e.cost," points)"]},e.length))})]}),"ricochet"===A&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Number of Targets:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:L,onChange:e=>V(parseInt(e.target.value)),children:u.ricochet.targetUpgrades.map(e=>(0,s.jsxs)("option",{value:e.targets,children:[e.label," (+",e.cost," points)"]},e.targets))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Initial Range:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:W,onChange:e=>_(parseInt(e.target.value)),children:u.ricochet.initialRangeUpgrades.map(e=>(0,s.jsxs)("option",{value:e.range,children:[e.label," (+",e.cost," points)"]},e.range))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"font-medium",children:"Range Between Targets:"}),(0,s.jsx)("select",{className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:Y,onChange:e=>H(parseInt(e.target.value)),children:u.ricochet.rangeBetweenUpgrades.map(e=>(0,s.jsxs)("option",{value:e.range,children:[e.label," (+",e.cost," points)"]},e.range))})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Attack Effects"}),G.length>0&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Selected Effects:"}),G.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 border border-green-300 rounded",children:[(0,s.jsxs)("span",{children:[e.trigger,": ",e.description," (+",e.cost," points)"]}),(0,s.jsx)("button",{onClick:()=>J(t),className:"text-red-600 hover:text-red-800",children:"Remove"})]},t))]}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(g).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:a.category}),Object.entries(a.effects).map(e=>{let[a,r]=e;return(0,s.jsxs)("div",{className:"border border-gray-300 rounded p-3",children:[(0,s.jsx)("div",{className:"font-medium",children:r.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:r.description}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-1 text-xs",children:Object.entries(r.costs||{}).map(e=>{let[r,n]=e;return(0,s.jsxs)("button",{onClick:()=>K(t,a,r,n),className:"p-1 bg-blue-100 hover:bg-blue-200 border border-blue-300 rounded text-center",disabled:n<0&&!G.some(e=>"\uD83C\uDCCF"===e.suit),children:[r,": ",n," pts"]},r)})}),r.restriction&&(0,s.jsx)("div",{className:"text-xs text-red-600 mt-1",children:r.restriction})]},a)})]},t)})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold",children:[(0,s.jsx)("span",{children:"Total Cost:"}),(0,s.jsxs)("span",{children:[$()," points"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{if(!S||!A)return;let e={type:"action",subType:"attack",name:S,exhaust:z,primary:T,attackModifiers:Q(),attackEffects:G,cost:$()};k&&j?j(e):!k&&v&&v(e)},disabled:!S||!A,className:"flex-1 py-3 px-4 rounded font-semibold ".concat(S&&A?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:k?"Update Attack":"Add Attack"}),(0,s.jsx)("button",{onClick:()=>{var e,t,a,s,r,n,i,l,c,o;C((null==b?void 0:b.name)||""),D((null==b||null==(e=b.attackModifiers)?void 0:e.type)||""),R(null!=(c=null==b?void 0:b.primary)?c:!N),U(null!=(o=null==b?void 0:b.exhaust)&&o),Z((null==b?void 0:b.attackEffects)||[]),P((null==b||null==(t=b.attackModifiers)?void 0:t.r)||0),O((null==b||null==(a=b.attackModifiers)?void 0:a.r)||0),B((null==b||null==(s=b.attackModifiers)?void 0:s.a)||0),q((null==b||null==(r=b.attackModifiers)?void 0:r.l)||1),V((null==b||null==(n=b.attackModifiers)?void 0:n.t)||1),_((null==b||null==(i=b.attackModifiers)?void 0:i.initR)||0),H((null==b||null==(l=b.attackModifiers)?void 0:l.btwn)||0)},className:"py-3 px-4 rounded font-semibold bg-gray-600 text-white hover:bg-gray-700",children:"Reset"})]})]})]})}function w(e){let{existingFacets:t=[],onAddAbility:a=null}=e,[n,i]=(0,r.useState)("instant"),[l,c]=(0,r.useState)({}),o=t.filter(e=>"instant"===e.type).length,d=t.filter(e=>"passive"===e.type).length,m=o<b.shared.maxPurchases,u=d<b.shared.maxPurchases,g=e=>{var t;let[a,s]=e.split(".");return null==(t=b[a])?void 0:t[s]},p=e=>{var t;return((null==(t=b[e])?void 0:t.rules)||[]).map(e=>({path:e,value:g(e)})).filter(e=>void 0!==e.value)},x=(e,t,a,r)=>{let n=p(e),i=n.find(e=>"shared.playerNaming"===e.path),l=n.find(e=>"shared.namingConvention"===e.path),c=b.shared.maxPurchasesRule,o=Object.entries(b[e]).filter(e=>{let[t,a]=e;return"description"!==t&&"rules"!==t&&"string"==typeof a}).map(e=>{let[t,a]=e;return{key:t,value:a}});return(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"instantAbilities"===e?"Instant Abilities":"Passive Abilities"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:b[e].description}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mb-3 space-y-1",children:[c&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Purchase Limit:"})," ",c]}),o.map(e=>{let{key:t,value:a}=e;return(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-medium",children:[t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),":"]})," ",a]},t)}),i&&(0,s.jsx)("p",{className:"italic",children:i.value}),l&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Naming Convention:"})," ",l.value]})]}),r&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-800",children:["Maximum ","instantAbilities"===e?"instant":"passive"," abilities reached (",t,"/",a,"). You cannot purchase more ","instantAbilities"===e?"instant":"passive"," abilities."]})})]})},y=(e,t)=>{c(a=>({...a,[e]:t}))},v=(e,t,s)=>{let r="instant"===s?m:u;if(a&&r){var n;a({type:s,name:(null==(n=l[e])?void 0:n.trim())||t.name,ruleName:t.name,description:t.description,cost:t.cost,isPrimary:t.cost>=10,id:e,category:t.category,...t.targeting&&{targeting:t.targeting},...t.range&&{range:t.range},...t.effect&&{effect:t.effect}})}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 flex flex-col gap-6 text-black",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Add an Ability Facet"}),(0,s.jsx)("div",{className:"flex flex-col gap-2 text-sm text-gray-600",children:"This section is for purchasing Instant Abilities and Passive Abilities."}),(0,s.jsxs)("div",{className:"flex gap-2 border-b",children:[(0,s.jsxs)("button",{onClick:()=>i("instant"),className:"px-4 py-2 font-medium transition-colors ".concat("instant"===n?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"),children:["Instant Abilities (",o,"/",b.shared.maxPurchases,")"]}),(0,s.jsxs)("button",{onClick:()=>i("passive"),className:"px-4 py-2 font-medium transition-colors ".concat("passive"===n?"text-green-600 border-b-2 border-green-600":"text-gray-600 hover:text-gray-900"),children:["Passive Abilities (",d,"/",b.shared.maxPurchases,")"]})]}),(0,s.jsxs)("div",{className:"flex-1",children:["instant"===n&&(()=>{let e=Object.entries(h);return(0,s.jsxs)("div",{className:"space-y-4",children:[x("instantAbilities",o,b.shared.maxPurchases,!m),(0,s.jsx)("div",{className:"grid gap-3",children:e.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-blue-600",children:a.cost}),(0,s.jsx)("button",{onClick:()=>v(t,a,"instant"),disabled:!m,className:"px-3 py-1 rounded transition-colors ".concat(m?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Add"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),a.category&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-3",children:["Category: ",a.category]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{htmlFor:"custom-name-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Name (optional):"}),(0,s.jsx)("input",{type:"text",id:"custom-name-".concat(t),placeholder:'e.g., "Blink Strike" (default: '.concat(a.name,")"),value:l[t]||"",onChange:e=>y(t,e.target.value),className:"w-full px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:!m})]})]},t)})})]})})(),"passive"===n&&(()=>{let e=Object.entries(f);return(0,s.jsxs)("div",{className:"space-y-4",children:[x("passiveAbilities",d,b.shared.maxPurchases,!u),(0,s.jsx)("div",{className:"grid gap-3",children:e.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-green-600",children:a.cost}),(0,s.jsx)("button",{onClick:()=>v(t,a,"passive"),disabled:!u,className:"px-3 py-1 rounded transition-colors ".concat(u?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Add"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),a.category&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mb-3",children:["Category: ",a.category]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{htmlFor:"custom-name-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Name (optional):"}),(0,s.jsx)("input",{type:"text",id:"custom-name-".concat(t),placeholder:'e.g., "Iron Will" (default: '.concat(a.name,")"),value:l[t]||"",onChange:e=>y(t,e.target.value),className:"w-full px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-green-500",disabled:!u})]})]},t)})})]})})()]})]})}function S(e){let{existingFacets:t=[],onAddReaction:a=null}=e,[n,i]=(0,r.useState)({}),[l,c]=(0,r.useState)({}),o=t.filter(e=>"reaction"===e.type).length,d=o<3,m=(e,t)=>{i(a=>({...a,[e]:t}))},u=(e,t)=>{c(a=>({...a,[e]:t}))},g=(e,t)=>l[t]?Math.max(1,e-v.exhaustionOption.costReduction):e,p=(e,t)=>{if(a&&d){var s;let r=null==(s=n[e])?void 0:s.trim(),i=l[e]||!1,c=g(t.cost,e);a({type:"reaction",subType:"reaction",name:r||t.name,ruleName:t.name,description:t.description,trigger:t.trigger,cost:c,exhaust:i,category:t.category,targeting:t.targeting,effect:t.effect,isPrimary:t.cost>=10,id:e,...t.range&&{range:t.range}})}},x=()=>(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"Reaction Actions"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Defensive and evasive actions that trigger in response to specific events"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mb-3 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Purchase Limit:"})," A model MAY purchase up to 3 reaction actions"]}),Object.entries(v).map(e=>{let[t,a]=e;return(0,s.jsxs)("p",{children:[(0,s.jsxs)("span",{className:"font-medium",children:[t.charAt(0).toUpperCase()+t.slice(1).replace(/([A-Z])/g," $1"),":"]})," ",a.description]},t)})]}),!d&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-800",children:["Maximum reactions reached (",o,"/",3,"). You cannot purchase more reactions."]})})]});return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 flex flex-col gap-6 text-black",children:[(0,s.jsxs)("h1",{className:"text-lg font-semibold",children:["Add Reaction Action (",o,"/",3,")"]}),(0,s.jsx)("div",{className:"flex flex-col gap-2 text-sm text-gray-600",children:"This section is for purchasing Reaction Actions that trigger in response to specific events."}),(0,s.jsx)("div",{className:"flex-1",children:(()=>{let e=Object.entries(y);return(0,s.jsxs)("div",{className:"space-y-4",children:[x(),(0,s.jsx)("div",{className:"grid gap-3",children:e.map(e=>{let[t,a]=e,r=g(a.cost,t),i=l[t]||!1;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:[r,i&&a.cost!==r&&(0,s.jsx)("span",{className:"text-sm text-gray-500 line-through ml-1",children:a.cost})]}),(0,s.jsx)("button",{onClick:()=>p(t,a),disabled:!d,className:"px-3 py-1 rounded transition-colors ".concat(d?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Add"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mb-3 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Trigger:"})," ",a.trigger]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Category:"})," ",a.category]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Effect:"})," ",a.effect]}),a.range&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Range:"})," ",a.range]})]}),(0,s.jsx)("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:(0,s.jsxs)("label",{className:"flex items-center text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:i,onChange:e=>u(t,e.target.checked),disabled:!d,className:"mr-2"}),(0,s.jsx)("span",{className:"font-medium",children:"Exhaustion Option:"}),(0,s.jsxs)("span",{className:"ml-1",children:["Inflicts 2 Exhaust Tokens instead of 1, reduces cost by ",v.exhaustionOption.costReduction," points (min 1)"]})]})}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{htmlFor:"custom-name-".concat(t),className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Name (optional):"}),(0,s.jsx)("input",{type:"text",id:"custom-name-".concat(t),placeholder:'e.g., "Counter Strike" (default: '.concat(a.name,")"),value:n[t]||"",onChange:e=>m(t,e.target.value),className:"w-full px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-purple-500",disabled:!d})]})]},t)})})]})})()})]})}function C(e){var t;let{}=e,[a,i]=(0,r.useState)({attackSkill:void 0,defense:void 0,facets:[],influence:void 0,mm:void 0,name:"",size:void 0,sizeCost:0,statsCost:0,strides:void 0,wounds:void 0}),[l,c]=(0,r.useState)("character-card"),[d,m]=(0,r.useState)(null);return console.log("Character Creation Component Rendered",a),(0,s.jsxs)("section",{id:"characterCreation",className:"w-full grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("section",{id:"editSection",className:"relative",children:[(0,s.jsx)("h1",{children:"Edit"}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 flex flex-col gap-4 text-black",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Character Name:"}),(0,s.jsx)("input",{type:"text",placeholder:"",id:"name",className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-500 bg-gray-50",value:a.name,onChange:e=>{i({...a,name:e.target.value}),"character-card"!==l&&c("character-card")}}),(0,s.jsx)("button",{className:"bg-sky-500 hover:bg-sky-700 cursor-pointer px-4 py-2 rounded transition",onClick:()=>c("character-size"),children:"Choose Size"}),(0,s.jsx)("button",{disabled:!a.size,className:"bg-sky-500 hover:bg-sky-700 cursor-pointer px-4 py-2 rounded transition disabled:bg-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed",onClick:()=>c("character-stats"),children:"Edit Base Stats"}),(0,s.jsx)("button",{disabled:!a.size,className:"bg-sky-500 hover:bg-sky-700 cursor-pointer px-4 py-2 rounded transition disabled:bg-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed",onClick:()=>c("add-attack-action-facet"),children:"Add Attack Action"}),(0,s.jsx)("button",{disabled:!a.size,className:"bg-sky-500 hover:bg-sky-700 cursor-pointer px-4 py-2 rounded transition disabled:bg-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed",onClick:()=>c("add-ability-facet"),children:"Add Ability"}),(0,s.jsx)("button",{disabled:!a.size,className:"bg-sky-500 hover:bg-sky-700 cursor-pointer px-4 py-2 rounded transition disabled:bg-gray-300 disabled:text-gray-400 disabled:cursor-not-allowed",onClick:()=>c("add-reaction-facet"),children:"Add Reaction"}),(0,s.jsx)("button",{className:"bg-sky-500 hover:bg-sky-700 cursor-pointer px-4 py-2 rounded transition",onClick:()=>c("character-card"),children:"View Character Card"})]}),(0,s.jsx)("span",{"data-tooltip-id":"characterCost","data-tooltip-content":"Character Cost","data-tooltip-place":"top",className:"absolute flex items-center justify-center border-2 border-sky-500 bg-sky-100 text-sky-800 font-bold shadow rounded-full w-8 h-8 text-[10px] top-2 right-2",children:function(){let e="number"!=typeof a.sizeCost||isNaN(a.sizeCost)?0:a.sizeCost;return e+("number"!=typeof a.statsCost||isNaN(a.statsCost)?0:a.statsCost)+a.facets.reduce((e,t)=>e+("number"!=typeof t.cost||isNaN(t.cost)?0:t.cost),0)}()}),(0,s.jsx)(n.m_,{id:"characterCost"})]}),(0,s.jsxs)("section",{id:"viewSection",children:[(0,s.jsx)("h1",{children:"View"}),"character-card"===l&&(0,s.jsx)(o,{...a,edit:!0,onFacetEdit:function(e,t){"attack"===t.subType&&(m(e),c("edit-attack-action-facet"))},onFacetDelete:function(e,t){let s=a.facets.filter((t,a)=>a!==e);i({...a,facets:s})}}),"character-size"===l&&(0,s.jsx)(j,{mm:a.mm,size:a.size,setSize:function(e,t){i({...a,attackSkill:e.attackSkill,defense:e.defense,influence:e.influence,mm:t,size:e.value,sizeCost:e.sizeCost,statsCost:0,strides:e.strides,wounds:e.wounds}),c("character-card")}},null!=(t=a.mm)?t:"mm"),"character-stats"===l&&(0,s.jsx)(k,{...a,updateBaseStats:function(e){i({...a,attackSkill:e.attackSkill,defense:e.defense,wounds:e.wounds,strides:e.strides,statsCost:e.cost}),c("character-card")}}),"add-attack-action-facet"===l&&(0,s.jsx)(N,{attackSkill:a.attackSkill,existingFacets:a.facets,onAddAttack:function(e){i({...a,facets:[...a.facets,e]}),c("character-card")}}),"add-ability-facet"===l&&(0,s.jsx)(w,{existingFacets:a.facets,onAddAbility:function(e){i({...a,facets:[...a.facets,e]}),c("character-card")}}),"add-reaction-facet"===l&&(0,s.jsx)(S,{existingFacets:a.facets,onAddReaction:function(e){i({...a,facets:[...a.facets,e]}),c("character-card")}}),"edit-attack-action-facet"===l&&null!==d&&(0,s.jsx)(N,{attackSkill:a.attackSkill,existingAttack:a.facets[d],existingFacets:a.facets,onUpdateAttack:e=>(function(e,t){let s=[...a.facets];s[e]=t,i({...a,facets:s}),m(null),c("character-card")})(d,e)})]})]})}},8393:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,3063,23)),Promise.resolve().then(a.bind(a,7785))}},e=>{var t=t=>e(e.s=t);e.O(0,[491,759,441,684,358],()=>t(8393)),_N_E=e.O()}]);